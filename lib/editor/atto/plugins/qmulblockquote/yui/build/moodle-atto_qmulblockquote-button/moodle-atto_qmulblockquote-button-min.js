YUI.add("moodle-atto_qmulblockquote-button",function(t){t.namespace("M.atto_qmulblockquote").Button=t.Base.create("button",t.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({icon:"e/toggle_blockquote",callback:this._BlockQuote})},_blockExist:function(t){var e=t.commonAncestorContainer;return e="undefined"!=typeof e?e.parentNode:t.parentElement,"BLOCKQUOTE"==e.tagName?(e.outerHTML=e.outerHTML+e.innerHTML,document.getElementById(e.id).remove(),!0):this._hasClass(e,"editor_atto_content_wrap")?!1:this._blockExist(e)},_BlockQuote:function(){var t="uniqueBlockId"+Math.floor(15*Math.random()),e=document.getSelection().getRangeAt(0),o='<blockquote id="'+t+'">'+e.toString()+"</blockquote><br><p><br></p>",n=this._blockExist(e);(n||"BLOCKQUOTE"===e.startContainer.tagName||"BLOCKQUOTE"===e.endContainer.tagName)&&(o=e.toString()),document.execCommand("insertHTML",!1,o),this.markUpdated()},_hasClass:function(t,e){return t.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});