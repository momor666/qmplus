YUI.add("moodle-atto_qmulicons-button",function(t){var e="atto_qmulicons",a={ICON:"atto_qmulicons_icon",MAP:"atto_qmulicons_map"},i={ICON:".atto_qmulicons_icon"},n='<div class="{{CSS.MAP}}">{{#each styles}}<div><a href="#" class="{{../CSS.ICON}}" data-text="{{get_string text "atto_qmulicons"}}" data-tagname="{{tagname}}" data-attr="{{attr}}" data-attrValue="{{attrValue}}"><div><{{tagname}} {{attr}}="{{attrValue}}" >{{get_string text "atto_qmulicons"}}</{{tagname}}></div></a></div>{{/each}}</div>';t.namespace("M.atto_qmulicons").Button=t.Base.create("button",t.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({icon:"e/customicon",iconComponent:"atto_qmulicons",callback:this._displayDialogue})},_displayDialogue:function(){if(this._currentSelection=this.get("host").getSelection(),this._currentSelection!==!1){var t=this.getDialogue({headerContent:M.util.get_string("inserticon",e),focusAfterHide:!0},!0);t.set("bodyContent",this._getDialogueContent()).show()}},_insertIcon:function(t){var e=t.target.ancestor(i.ICON,!0),a=this.get("host");t.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var n="<ul><"+e.getData("tagname")+" "+e.getData("attr")+'="'+e.getData("attrValue")+'" ></'+e.getData("tagname")+"></ul>";a.setSelection(this._currentSelection),a.insertContentAtFocusPoint(n),this.markUpdated()},_getDialogueContent:function(){var e=t.HanCSS={ICON:"atto_qmulicons_icon",MAP:"atto_qmulicons_map"},e=t.Handlebars.compile(n),o=t.Node.create(e({styles:this.get("styles"),CSS:a}));return o.delegate("click",this._insertIcon,i.ICON,this),o.delegate("key",this._insertIcon,"32",i.ICON,this),o}},{ATTRS:{styles:{value:{}}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});