define(["jquery","core/log"],function(a,b){return{init:function(){var b=this;a(document).ready(function(){var c,d=0,e=0;if(c=a(".path-grade-report-grader div.gradeparent"),c.length>0){var f=a("nav"),g=!1;if(f.length)if("fixed"===f.css("position")){d=f.outerHeight(!0);var g=!0}else{var h=a(".navbar");h&&"fixed"===h.css("position")&&(d=h.outerHeight(!0))}e=a("#user-grades tr.heading").offset().top,window.setTimeout(b.initFloater,500),window.setTimeout(b.initFloater,1e3),c.scroll(function(){b.updateFloaterPos(d,e,g)}),a(window).scroll(function(){b.updateFloaterPos(d,e,g)}).resize(function(){b.updateFloaterPos(d,e,g)})}})},updateFloaterPos:function(b,c,d){a(".path-grade-report-grader div.gradeparent").each(function(){var e=a(this),f=e.find(".floater.sideonly.slgradebook"),g=e.find(".floater.heading.slgradebook"),h=e.scrollLeft();f.css("left",h+"px"),h?f.addClass("floating"):f.removeClass("floating");var i=a(window).scrollTop();1==d&&(i+=b),i+b>c?(g.offset({top:i}),g.not(f).addClass("floating")):(g.offset({top:c}),g.not(f).removeClass("floating"))})},initFloater:function(){var b=this,c=a(".path-grade-report-grader div.gradeparent"),d=!0;c.each(function(){var b=a(this),c=b.find(".floater");if(!c.length)return void(d=!1);c.clone().appendTo(b).addClass("slgradebook"),c.hide()}),d||window.setTimeout(b.initFloater,100)}}});