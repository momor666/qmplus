!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.STH=b()}(this,function(a,b,c){function d(a,b){function c(){z.disconnect(),A.disconnect(),i.helpers.removeEventListener(window,"resize",B),null!=this.$scrollable&&i.helpers.removeEventListener(this.$scrollable,"scroll",B),this.$table.classList.remove(i.constants.CSS_CLASS_NAME),null!=J&&J.classList.remove(i.constants.CSS_CLASS_NAME),z=void 0,A=void 0,H=void 0,G=void 0,J=void 0,K=void 0}function e(){return E}function f(a){E=!0===a}function g(){return H}function h(a){if(null==a)throw new ReferenceError("`$table` cannot be `null` or `undefined`.");H=a,H.classList.contains(i.constants.CSS_CLASS_NAME)||H.classList.add(i.constants.CSS_CLASS_NAME),o.call(this,H.querySelector("caption")),p.call(this,H.querySelector("thead")),J&&(K=J.cloneNode(!0),K.classList.add("clone"),H.insertBefore(K,J.nextSibling),q.call(this,H.querySelector("thead.clone")))}function j(){return G}function k(a){null==a?m.call(this):l.call(this,a),null==G&&l.call(this,n(this.$table))}function l(a){a!==G&&(null!=G&&(i.helpers.removeEventListener(window,"scroll",B),i.helpers.removeEventListener(window,"resize",B)),null!=(G=a)&&(i.helpers.addEventListener(window,"scroll",B),i.helpers.addEventListener(window,"resize",B)))}function m(){var a=this.$table.getAttribute(i.constants.SCROLLABLE_ELEMENT_SELECTOR_ATTR_NAME);null!=a&&"string"==typeof a&&a.trim()&&l.call(this,document.querySelector(a.trim()))}function n(a){if(null==a.parentNode)return a;var b=a.parentNode;if(9==b.nodeType)return b;switch(getComputedStyle(b).overflowY){case"auto":case"scroll":return b}return n(b)}function o(a){I=a}function p(a){J=a}function q(a){K=a}function r(){if(null!=J){K.classList.contains("use")||K.classList.add("use");var a,b,c,d=null!=I,e=this.$table.getBoundingClientRect().top,f=this.$table.getBoundingClientRect().bottom,g=J.querySelectorAll("th"),h=getComputedStyle(J),j=i.helpers.removeUnit(h.getPropertyValue("margin-top")),k=document.querySelector(".navbar.fixed-top").offsetHeight,l=e,m=f;if(d&&(a=getComputedStyle(I),b=I.getBoundingClientRect(),c=i.helpers.removeUnit(a.getPropertyValue("margin-bottom")),l+=i.helpers.removeUnit(a.getPropertyValue("margin-top")),this.includeCaption||(l+=b.height+c)),this.includeCaption||(l+=j),l<k&&m>k)return d&&this.includeCaption?(s(I,k,0,e),t(I,a),J.style.top=i.helpers.removeUnit(a.getPropertyValue("top"))+b.height+c+j+"px"):s(J,k,0,e),_$tableBody=H.querySelector("tbody"),J.style.maxWidth=getComputedStyle(_$tableBody).getPropertyValue("width"),t(J,h),u.call(this,g),d&&this.includeCaption&&I.classList.add(i.constants.CSS_CLASS_NAME),void J.classList.add(i.constants.CSS_CLASS_NAME);d&&this.includeCaption&&v(I),v(J),v(K),w(g)}}function s(a,b,c,d){a.style.top=b-d+c+"px"}function t(a,b){var c=i.helpers.removeUnit(b.getPropertyValue("margin-right")),d=i.helpers.removeUnit(b.getPropertyValue("border-right-width"));a.style.left=b.getPropertyValue("margin-left"),a.style.right=c-d+"px"}function u(a){var b=this.$table.querySelector("tbody > tr:first-child"),c=this.$table.querySelectorAll("tbody > tr:first-child > *"),d=2;for((b.classList.contains("plugintypeheader")||b.classList.contains("rolecapheading"))&&(c=this.$table.querySelectorAll("tbody > tr:nth-child(2) > *"));0==c.length;)c=this.$table.querySelectorAll("tbody > tr:nth-child("+d+") > *"),10==++d&&(c=null);for(var e=null==c||0===c.length,f=100/a.length+"%",g=0===F.length,h=0;h<a.length;h++){var i=a[h];if(g&&F.push({width:i.style.getPropertyValue("width"),priority:i.style.getPropertyPriority("width")}),e)i.style.width=f;else{var j=c[h].getBoundingClientRect().width;i.style.width=j+"px";var k=i.getBoundingClientRect().width;k<j?i.style.width=j+(j-k)+"px":k>j&&(i.style.width=j-(k-j)+"px")}}}function v(a){a.classList.remove(i.constants.CSS_CLASS_NAME),a.classList.remove("use"),a.removeAttribute("style")}function w(a){if(0!==F.length){for(var b=0;b<a.length;b++){var c=a[b],d=F[b];null!=d.width?c.style.setProperty("width",d.width,d.priority):c.style.removeProperty("width")}F.splice(0,F.length)}}function x(a){a.forEach(function(a){var b;for(b=0;b<a.addedNodes.length;b++)if("thead"===a.addedNodes[b].nodeName){p.call(this,a.addedNodes[b]);break}for(b=0;b<a.removedNodes.length;b++)if("thead"===a.removedNodes[b].nodeName){p.call(this,void 0);break}})}function y(a){a.forEach(function(a){a.attributeName===i.constants.SCROLLABLE_ELEMENT_SELECTOR_ATTR_NAME&&m.call(this)})}if(this.constructor!==d)return new d(a,b);var z,A,B,C,D,E,F,G,H,I,J,K;(function(){this.destroy=c.bind(this),Object.defineProperties(this,{includeCaption:{get:e,set:f},$scrollable:{get:j,set:k},$table:{get:g,set:h}}),B=r.bind(this),C=x.bind(this),D=y.bind(this),a=a||{},a instanceof HTMLElement&&(a={tableElement:a}),F=[],this.includeCaption=a.includeCaption,this.$table=a.tableElement,this.$scrollable=b||a.scrollableElement,z=new MutationObserver(C),z.observe(this.$table,{childList:!0}),A=new MutationObserver(D),A.observe(this.$table,{attributes:!0})}).call(this)}function e(){function a(){for(var a=document.querySelectorAll("table."+i.constants.CSS_CLASS_NAME),b=0;b<a.length;b++)this.add(a[b])}function b(){this.removeAll(),this.init()}function c(a,b){return j.indexOf(a)>-1?a:(f(a,b),j.push(a),a)}function d(a){var b=j.indexOf(a);return b>-1&&(g(a),j.splice(b,1)),a}function h(){for(var a=j.length;a>=0;a--)this.remove(a)}if(this.constructor!==e)return new e;var j;(function(){this.init=a,this.reinit=b,this.add=c,this.remove=d,this.removeAll=h,j=[]}).call(this)}function f(a,b){return h("tableElement",a),h("scrollableElement",b,!0),null!=a.stickyTableHeader?a:(a.stickyTableHeader=new d(a,b),a)}function g(a){return h("tableElement",a),null==a.stickyTableHeader?a:(a.stickyTableHeader.destroy(),delete a.stickyTableHeader,a)}function h(a,b,c){if(!0!==c&&null==b)throw new ReferenceError("`"+a+"` parameter cannot be `null` or `undefined`.");if(!0===c&&null!=b&&!(b instanceof HTMLElement))throw new TypeError("`"+a+"` parameter must be an `HTMLElement`, but a `"+b.constructor.name+"` was given.")}var i={constants:{CSS_CLASS_NAME:"sth-sticky",SCROLLABLE_ELEMENT_SELECTOR_ATTR_NAME:"data-sth-scrollable-selector"},helpers:{addEventListener:function(a,b,c){if(a.attachEvent)return void a.attachEvent("on"+b,c);a.addEventListener(b,c,!1)},removeEventListener:function(a,b,c){if(a.detachEvent)return void a.detachEvent("on"+b);a.removeEventListener(b,c)},removeUnit:function(a){if(null==a||"string"!=typeof a)throw new TypeError("`value` parameter must be a non-null/non-undefined string!");return""===a.trim()?0:Number(a.trim().replace(/[a-z]*$/i,""))}}};Object.freeze(i);var j=new e;return function(){var a={};return Object.defineProperties(a,{disableStickyTableHeader:{configurable:!1,enumerable:!0,writable:!1,value:g},enableStickyTableHeader:{configurable:!1,enumerable:!0,writable:!1,value:f},manager:{configurable:!1,enumerable:!0,writable:!1,value:j},StickyTableHeader:{configurable:!1,enumerable:!0,writable:!1,value:d}}),a}()});