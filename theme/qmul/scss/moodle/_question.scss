/* Question */

.questionbank h2 {
    margin-top: 0;
}

.questioncategories h3 {
    margin-top: 0;
}

#chooseqtypebox {
    margin-top: 1em;
}

#chooseqtype h3 {
    margin: 0 0 0.3em;
}

#chooseqtype .instruction {
    display: none;
}

#chooseqtype .fakeqtypes {
    border-top: 1px solid silver;
}

#chooseqtype .qtypeoption {
    margin-bottom: 0.5em;
}

#chooseqtype label {
    display: block;
}

#chooseqtype .qtypename img {
    padding: 0 0.3em;
}

#chooseqtype .qtypename {
    display: inline-table;
    width: 16em;
}

#chooseqtype .qtypesummary {
    display: block;
    margin: 0 2em;
}

#chooseqtype .submitbuttons {
    margin: 0.7em 0;
    text-align: center;
}

#qtypechoicecontainer {
    display: none;
}

#qtypechoicecontainer_c.yui-panel-container.shadow .underlay {
    background: none;
}

#qtypechoicecontainer.yui-panel .hd {
    color: #333;
    text-shadow: 1px 1px 1px #fff;
    @include border-top-radius(10px);
    border: 1px solid #ccc;
    border-bottom: 1px solid #bbb;
    @include gradient-y(#fff, #ccc);
}

#qtypechoicecontainer {
    font-size: 12px;
    color: #333;
    background: #f2f2f2;
    border-radius: 10px;
    border: 1px solid #ccc;
    border-top: 0 none;
    box-shadow: 5px 5px 20px 0 #666;
}

#qtypechoicecontainer #chooseqtype {
    width: 40em;
}

#chooseqtypehead h3 {
    margin: 0;
    font-weight: normal;
}

#chooseqtype .qtypes {
    position: relative;
    border-bottom: 1px solid #bbb;
    padding: 0.24em 0;
}

#chooseqtype .alloptions {
    overflow-x: hidden;
    overflow-y: auto;
    max-height: 400px;
    max-height: calc(#{"100vh - 15em"});
    width: 60%;
}

#chooseqtype .qtypeoption {
    margin-bottom: 0;
    padding: 0.3em 0.3em 0.3em 1.6em;
}

#chooseqtype .qtypeoption img {
    vertical-align: text-bottom;
    padding-left: 1em;
    padding-right: 0.5em;
}

#chooseqtype .selected {
    background-color: #fff;
    box-shadow: 0px 0 10px 0 #ccc;
}

#chooseqtype .instruction,
#chooseqtype .qtypesummary {
    display: none;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 60%;
    margin: 0;
    overflow-x: hidden;
    overflow-y: auto;
    padding: 1.5em 1.6em;
    background-color: #fff;
    overflow-y: auto;
}

#chooseqtype .instruction,
#chooseqtype .selected .qtypesummary {
    display: block;
}

#categoryquestions {
    margin: 0;
    td,
    th {
        padding: 5px;
    }
    th {
        text-align: left;
        font-weight: normal;
    }
    .checkbox {
        padding: 5px;
    }
    .checkbox input[type="checkbox"] {
        margin-left: 0px;
        float: none;
    }
    .iconcol {
        padding: 3px;
        width: 30px;
        &.previewaction {
            width: 60px;
        }
    }
    label {
        margin: 0;
    }
    .header {
        text-align: left;
        padding: 5px;
    }
    .qtype {
        padding: 5px;
    }
}

#page-mod-quiz-edit {
    div.questionbankwindow div.header {
        margin: 0;
    }
    div.questionbankwindow.block {
        padding: 0;
        border-width: 1px;
    }
    .statusbar {
        margin: 1rem 0;
        float: left;
        width: 50%;
    }
    .rpcontainerclass {
        clear: both;
    }
    .maxgrade,
    .totalpoints {
        display: block;
        margin: 0;
        padding: 0;
        float: right;
        form {
            @include media-breakpoint-down(sm) {
                input#inputmaxgrade,
                input[type="submit"] {
                    width: auto;
                    display: inline-block;
                }
            }
        }
    }
    .section-heading {
        margin-left: 0;
        .instanceshufflequestions {
            font-size: $font-size-base;
            margin-right: 0;
            label:last-child {
                margin-right: 0;
            }
        }
    }
    .add-menu-outer {
        position: static;
        text-align: center;
        .moodle-actionmenu {
            width: 200px;
            display: block;
            margin: 0 auto;
        }
        a.textmenu {
            font-size: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='44px' height='44px' viewBox='0 0 44 44'%3E%3Cg fill='${brand-primary}'%3E%3Cpath d='M22,0 C9.8,0 0,9.8 0,22 C0,34.2 9.8,44 22,44 C34.2,44 44,34.2 44,22 C44,9.8 34.2,0 22,0 L22,0 Z M34,23 C34,23.6 33.6,24 33,24 L24.5,24 C24.2,24 24,24.2 24,24.5 L24,33 C24,33.6 23.6,34 23,34 L21,34 C20.4,34 20,33.6 20,33 L20,24.5 C20,24.2 19.8,24 19.5,24 L11,24 C10.4,24 10,23.6 10,23 L10,21 C10,20.4 10.4,20 11,20 L19.5,20 C19.8,20 20,19.8 20,19.5 L20,11 C20,10.4 20.4,10 21,10 L23,10 C23.6,10 24,10.4 24,11 L24,19.5 C24,19.8 24.2,20 24.5,20 L33,20 C33.6,20 34,20.4 34,21 L34,23 L34,23 Z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-size: 45px;
            background-position: 50%;
            width: 50px;
            height: 50px;
            display: block;
            margin: 0 auto;
            &:hover {
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='44px' height='44px' viewBox='0 0 44 44'%3E%3Cg fill='${navbar-default-link-hover-color}'%3E%3Cpath d='M22,0 C9.8,0 0,9.8 0,22 C0,34.2 9.8,44 22,44 C34.2,44 44,34.2 44,22 C44,9.8 34.2,0 22,0 L22,0 Z M34,23 C34,23.6 33.6,24 33,24 L24.5,24 C24.2,24 24,24.2 24,24.5 L24,33 C24,33.6 23.6,34 23,34 L21,34 C20.4,34 20,33.6 20,33 L20,24.5 C20,24.2 19.8,24 19.5,24 L11,24 C10.4,24 10,23.6 10,23 L10,21 C10,20.4 10.4,20 11,20 L19.5,20 C19.8,20 20,19.8 20,19.5 L20,11 C20,10.4 20.4,10 21,10 L23,10 C23.6,10 24,10.4 24,11 L24,19.5 C24,19.8 24.2,20 24.5,20 L33,20 C33.6,20 34,20.4 34,21 L34,23 L34,23 Z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");
            }
            .caret {
                display: none;
            }
        }
        ul.menu {
            top: 55px !important;
            text-align: left;
        }
    }
    .last-add-menu {
        text-align: center;
        margin-bottom: 10px;
        height: auto;
    }
    ul.slots {
        clear: both;
        margin-top: 15px;
        padding: 0;
        .activityinstance span.instancename {
            overflow-x: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            width: 70%;
            display: inline-block;
            height: auto;
            font-size: initial;
        }
        li.section {
            .content {
                background-color: $gray-lightest;
                padding: 1rem;
                ul.section {
                    background: #fff;
                    padding: 1rem;
                    li.activity.pagenumber {
                        position: relative;
                        margin-top: 30px;
                        margin-top: 45px;
                        &:before {
                            content: '';
                            height: 15px;
                            width: calc(100% + 30px);
                            left: -15px;
                            background-color: $gray-lightest;
                            position: absolute;
                            top: -30px;
                        }
                        &:first-of-type {
                            margin-top: 0;
                            &:before {
                                display: none;
                            }
                        }
                        .moodle-actionmenu {
                            margin: .25rem auto;
                        }
                    }
                    li.activity {
                        position: relative;
                        margin: 3px 0;
                        padding: .75rem;
                        background-color: $gray-lightest;
                        .page_split_join_wrapper {
                            position: absolute;
                            left: -7px;
                            bottom: -8px;
                            width: 16px;
                            height: 16px;
                            z-index: 2;
                            .page_split_join {
                                position: relative;
                                left: auto;
                                top: auto;
                                text-align: center;
                                img {
                                    margin: 0;
                                }
                            }
                        }
                        .glyphicon {
                            text-align: center;
                        }
                        .activityinstance {
                            display: block;
                            position: static;
                            padding: 0;
                        }
                        .instancemaxmarkcontainer {
                            padding: 0 0 0 .2rem;
                            form {
                                display: inline-block;
                                input {
                                    margin: 0;
                                    padding: .1rem .5rem;
                                    height: 1em;
                                    width: 100%;
                                }
                            }
                        }
                        .actions {
                            white-space: normal;
                            position: static;
                        }
                    }
                }
            }
        }
    }
}

#categoryquestions {
    .checkbox {
        display: table-cell;
        width: 30px;
        input[type="checkbox"] {
            margin-left: 0px;
            position: relative;
        }
    }
    .qtype {
        width: 38px;
    }
    img.iconsmall {
        margin: 0;
    }
}

.questionbank .singleselect {
    margin: 0;
}


/* Question editing form */

#combinedfeedbackhdr div.fhtmleditor {
    padding: 0;
}

#combinedfeedbackhdr div.fcheckbox {
    margin-bottom: 1em;
}

#multitriesheader div.fitem_feditor {
    margin-top: 1em;
}

#multitriesheader div.fitem_fgroup {
    margin-bottom: 1em;
}

#multitriesheader div.fitem_fgroup fieldset.felement label {
    margin-left: 0.3em;
    margin-right: 0.3em;
}

body.path-question-type .fitem_fgroup .accesshide {
    font: inherit;
    left: 0;
    position: static;
    padding-right: .3em;
    width: auto;
    height: auto;
}

.que {
    clear: left;
    text-align: left;
    @include make-row();
    margin-bottom: 1.5rem;
    background: #fff;
    padding: 0 1rem;
}

.que h3.no {
    margin: 0;
    font-size: 0.8em;
    line-height: 1;
}

.que span.qno {
    font-size: 1.5em;
    font-weight: bold;
}

.que .info > div {
    font-size: 0.8em;
    margin-top: 0.7em;
}

body.path-question-type .mform fieldset.hidden {
    padding: 0;
    margin: 0.7em 0 0;
}

.que .info .questionflag.editable {
    cursor: pointer;
}

.que .info .editquestion img,
.que .info .questionflag img,
.que .info .questionflag input {
    vertical-align: bottom;
    opacity: 0;
    visibility: hidden;
    display: none;
}
.que .info {
    @include make-col-ready();
    @include make-col(12);
    @include media-breakpoint-up(md) {
        @include make-col(2);
    }
}

.que .content {
    @include make-col-ready();
    @include make-col(12);
    @include media-breakpoint-up(md) {
        @include make-col(10);
    }
}

.que .formulation,
.que .outcome,
.que .comment {
    @include make-alert;
    a {
        @extend .alert-link;
    }
}

.que .formulation {
    @include make-alert;
    a {
        @extend .alert-link;
    }
    color: $text-color;
}

.formulation input[type="text"],
.formulation select {
    width: auto;
    vertical-align: baseline;
}

.que .comment {
    @extend .alert-success;
}

.que .history {
    @include make-well;
}

.que .ablock {
    margin: 0.7em 0 0.3em 0;
}

.que .im-controls {
    margin-top: 0.5em;
    text-align: left;
}

.que .specificfeedback,
.que .generalfeedback,
.que .rightanswer,
.que .im-feedback,
.que .feedback,
.que p {
    margin: 0 0 0.5em;
}

.que.multichoice .answer .specificfeedback {
    display: inline-block;
    margin-left: 5px;
    div {
        display: inline
    }
}

.que .qtext {
    margin-bottom: 1.5em;
}

.que .correctness {
    @include make-badge;
    &.correct {
        background-color: $badge-success-bg;
    }
    &.partiallycorrect {
        background-color: $badge-warning-bg;
    }
    &.notanswered,
    &.incorrect {
        background-color: $badge-danger-bg;
    }
}

.que .validationerror {
    color: $state-danger-text;
}

// copied from .formFieldState in mixin.less
// and made more specific
@mixin answerState($text-color,
$backgroundColor) {
    $borderColor: $text-color;
    color: $text-color;
    background-color: $backgroundColor;
    border-color: $borderColor;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075); // Redeclare so transitions work
    &:focus {
        border-color: darken($borderColor, 10%);
        $shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px lighten($borderColor, 20%);
        box-shadow: $shadow;
    }
}

.formulation .correct {
    background-color: rgba($state-success-bg, 50%);
}

.formulation .partiallycorrect {
    background-color: rgba($state-warning-bg, 50%);
}

.formulation .incorrect {
    background-color: rgba($state-danger-bg, 50%);
}

.formulation select.correct,
.formulation input.correct {
    @include answerState($state-success-text,
    $state-success-bg);
}

.formulation select.partiallycorrect,
.formulation input.partiallycorrect {
    @include answerState($state-warning-text,
    $state-warning-bg);
}

.formulation select.incorrect,
.formulation input.incorrect {
    @include answerState($state-danger-text,
    $state-danger-bg);
}

.que .grading,
.que .comment,
.que .commentlink,
.que .history {
    margin-top: 0.5em;
}

.que .history h3 {
    margin: 0 0 0.2em;
    font-size: 1em;
}

.que .history table {
    width: 100%;
    margin: 0;
}

.que .history .current {
    font-weight: bold;
}

.que .questioncorrectnessicon {
    vertical-align: text-bottom;
}

.que input.questionflagimage {
    padding-right: 3px;
}

.importerror {
    margin-top: 10px;
    border-bottom: 1px solid #555;
}

.mform .que.comment .fitemtitle {
    width: 20%;
}

#page-question-preview #techinfo {
    margin: 1em 0;
}

// Bootstrap 3 only
#questionbank + .container {
    padding: 0;
}

// imported from quiz.css
#page-mod-quiz-edit .box.generalbox.questionbank {
    padding: 0.5em;
}

#page-mod-quiz-edit .questionbank .categorypagingbarcontainer,
#page-mod-quiz-edit .questionbank .categoryquestionscontainer,
#page-mod-quiz-edit .questionbank .choosecategory {
    padding: 0;
}

#page-mod-quiz-edit .questionbank .choosecategory select {
    width: 100%;
}

#page-mod-quiz-edit div.questionbank .categoryquestionscontainer {
    margin: 0;
    background: transparent;
}

#page-mod-quiz-edit #categoryquestions>thead {
    background: #FFF;
}

#page-mod-quiz-edit #categoryquestions>tbody>tr:nth-of-type(even) {
    background: #e4e4e4;
}

#page-mod-quiz-edit .questionbankwindow div.header {
    color: #444;
    text-shadow: none;
    padding: 3px;
    @include border-top-radius(4px);
    margin: 0 -10px 0 -10px;
    padding: 2px 10px 2px 10px;
    background: transparent;
    /* Old browsers */
}

#page-mod-quiz-edit .questionbankwindow div.header a:link,
#page-mod-quiz-edit .questionbankwindow div.header a:visited {
    color: $link-color;
}

#page-mod-quiz-edit .questionbankwindow div.header a:hover {
    color: $link-hover-color;
}

#page-mod-quiz-edit .createnewquestion {
    padding: 0.3em 0;
    div,
    input {
        margin: 0;
    }
}

#page-mod-quiz-edit .questionbankwindow div.header .title {
    color: $text-color;
}

#page-mod-quiz-edit div.container div.generalbox {
    background-color: transparent;
    padding: 1.5em;
}

#page-mod-quiz-edit .categoryinfo {
    background-color: transparent;
    border-bottom: none;
}

#page-mod-quiz-edit .createnewquestion .singlebutton input {
    margin-bottom: 0;
}

#page-mod-quiz-edit div.questionbank .categorysortopotionscontainer,
#page-mod-quiz-edit div.questionbank .categoryselectallcontainer {
    padding: 0 0 1.5em 0;
}

#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer {
    background-color: transparent;
    margin: 0;
    border-top: 0;
    border-bottom: 0;
    .paging {
        padding: 0 0.3em;
    }
}

#page-mod-quiz-edit div.question div.content div.questioncontrols {
    background-color: $body-bg;
}

#page-mod-quiz-edit div.question div.content div.points {
    margin-top: -0.5em;
    padding-bottom: 0em;
    border: none;
    background-color: $body-bg;
    position: static;
    width: 12.1em;
    float: right;
    margin-right: 60px;
}

#page-mod-quiz-edit div.question div.content div.points br {
    display: none;
}

#page-mod-quiz-edit div.question div.content div.points label {
    display: inline-block;
}

#page-mod-quiz-edit .questionbankwindow div.header .title {
    color: $text-color;
}

#page-mod-quiz-edit div.container div.generalbox {
    background-color: transparent;
    padding: 1.5em;
}

#page-mod-quiz-edit .categoryinfo {
    background-color: $body-bg;
    border-bottom: none;
}

#page-mod-quiz-edit div.questionbank .categorysortopotionscontainer,
#page-mod-quiz-edit div.questionbank .categoryselectallcontainer {
    padding: 0 0 1.5em 0;
}

#page-mod-quiz-edit div.questionbank .categorypagingbarcontainer {
    padding: 1em;
    background-color: transparent;
    margin: 0 -1.2em;
    border-top: none;
    border-bottom: none;
}

#page-mod-quiz-edit div.question div.content div.questioncontrols {
    background-color: $body-bg;
}

#page-mod-quiz-edit div.question div.content div.points {
    margin-top: -0.5em;
    padding-bottom: 0.5em;
    border: none;
    background-color: $body-bg;
}

#page-mod-quiz-edit div.question div.content div.points label {
    display: inline-block;
}

#page-mod-quiz-edit div.quizpage .pagecontent .pagestatus {
    background-color: $body-bg;
}

#page-mod-quiz-edit .quizpagedelete,
#page-mod-quiz-edit .quizpagedelete img {
    background-color: transparent;
}

#page-mod-quiz-edit div.quizpage .pagecontent {
    border: 1px solid #ddd;
    border-radius: 2px;
    overflow: hidden;
}

#page-mod-quiz-edit div.questionbank .categoryinfo {
    padding: 0.3em 0;
}

#page-mod-quiz-edit div.questionbank .modulespecificbuttonscontainer {
    padding: 0;
    strong {
        display: block;
    }
    hr,
    br {
        display: none;
    }
    strong {
        margin-left: -0.3em;
    }
    strong label {
        margin-left: 0.3em;
    }
    input {
        margin-left: 0;
        margin-bottom: 0.3em;
    }
    input + input {
        margin-left: 5px;
    }
}

.questionbankwindow .module {
    width: auto;
}

#page-mod-quiz-edit div.editq div.question div.content {
    background-color: $body-bg;
    border: 1px solid #ddd;
    border-radius: 2px;
    overflow: hidden;
}

.path-mod-quiz .statedetails {
    display: block;
    font-size: 0.9em;
}

a#hidebankcmd {
    color: $link-color;
}

// override question plugins
// qtype_shortanswer
.que.shortanswer .answer {
    padding: 0;
}

.que label {
    display: inline;
    font-weight: normal;
}

.path-question-type #id_answerhdr .fitem_feditor .felement {
    margin-left: 0px;
    margin-right: 0px;
}

body.path-question-type .mform fieldset.hidden {
    padding: 0;
    margin: 0.7em 0 0;
}

.im-feedback {
    @include make-alert;
    @extend .alert-info;
    a {
        @extend .alert-link;
    }
}

.questionpreview {
    margin-top: 2px;
    padding: .25rem;
    line-height: 100%;
    .glyphicon {
        min-width: 5px;
    }
}

.choosecategory {
    margin-bottom: 1.5rem;
}

.categoryinfo {
    padding: .5rem 0;
}

#qbehaviours td.c4 {
    text-align: right;
}

.video-js .vjs-play-control::before {
    line-height: 1.75;
}

.vjs-error .vjs-error-display::before {
    line-height: 1;
    margin-top: -.5em;
    position: absolute;
    text-shadow: 0.05em 0.05em 0.1em #000;
    text-align: center;
    vertical-align: middle;
    top: 80%;
    width: 100%;
}

.que.ddwtos .formulation {
    box-sizing: content-box;
}